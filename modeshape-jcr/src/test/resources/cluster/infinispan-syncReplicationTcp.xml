<?xml version="1.0" encoding="UTF-8"?>
<infinispan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:infinispan:config:5.2 http://www.infinispan.org/schemas/infinispan-config-5.2.xsd"
            xmlns="urn:infinispan:config:5.2">

    <global>

        <globalJmxStatistics enabled="false" allowDuplicateDomains="true"/>
        <transport clusterName="cluster-${cluster.testname}">
            <properties>
                <property
                    name="configurationFile"
                    value="../modeshape-jcr/target/test-classes/cluster/jgroups-config-tcp.xml" />
            </properties>
        </transport>
    </global>

    <namedCache name="metadata">
        <clustering mode="replication">
            <sync/>
        </clustering>
        <locking
                isolationLevel="READ_COMMITTED"
                lockAcquisitionTimeout="20000"
                writeSkewCheck="false"
                concurrencyLevel="500"
                useLockStriping="false"
                />
        <transaction transactionManagerLookupClass="org.infinispan.transaction.lookup.GenericTransactionManagerLookup"
                     transactionMode="TRANSACTIONAL"
                     lockingMode="PESSIMISTIC" />
        <loaders passivation="false"
                 shared="false"
                 preload="false">
            <loader class="org.infinispan.loaders.file.FileCacheStore"
                    fetchPersistentState="true"
                    purgeOnStartup="true">
                <properties>
                    <property name="location" value="../modeshape-jcr/target/modeshape-performance-test/${cluster.testname}/node${cluster.item.number}/repository" />
                </properties>
            </loader>
        </loaders>
    </namedCache>
</infinispan>
